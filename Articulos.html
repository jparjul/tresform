
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1">
   <meta name="apple-mobile-web-app-capable" content="yes" />
   <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0"/>

    <link rel="stylesheet" href="jquery.mobile-1.1.0/jquery-mobile-960.min.css" />
    <link rel="stylesheet" href="jquery.mobile-1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="jquery.mobile-1.1.0/jquery-1.7.1.min.js"></script>

      
    <script src="jquery.mobile-1.2.0/jquery.mobile-1.2.0.min.js"></script>

    <script language="javascript" type="text/javascript" src="SBODatabase.js"></script>


    <script type="text/javascript">

        var Articulo = null;

       


        $("#pagecli1").live("pageinit", function (event) {

            Articulo = GetStorageValue ("Articulo");

            if (Articulo != null) {

                var myDB = OpenDatabase(successfunction, errorfunction);

                myDB.transaction(function (tx) {

                    tx.executeSql("SELECT * FROM AX_OITM WHERE ItemCode = ?", [Articulo], function (tx, result) {
                        dataset = result.rows;

                        var sInitText = "<li><div class='container_12'><div class='grid_4'>";
                        var sMidText = "</div><div class='grid_8'>";
                        var sEndText = "</div></div></li>";

                        var sText = "";
                        sText += "<li data-role='list-divider'>General</li>";
                        sText += sInitText + "Codigo:" + sMidText + result.rows.item(0)['ItemCode'] + sEndText;
                        sText += sInitText + "Descripción:" + sMidText + result.rows.item(0)['ItemName'] + sEndText;
                        sText += sInitText + "Código EAN:" + sMidText + result.rows.item(0)['CodeBars'] + sEndText;
                        sText += sInitText + "Articulos Unidad:" + sMidText + result.rows.item(0)['SalUnitMsr'] + sEndText;
                        sText += sInitText + "Peso Bruto:" + sMidText + result.rows.item(0)['PesoBruto'] + sEndText;
                        sText += sInitText + "Peso Neto:" + sMidText + result.rows.item(0)['PesoNeto'] + sEndText;
                        sText += sInitText + "Peso Escurrido:" + sMidText + result.rows.item(0)['PesoEscurrido'] + sEndText;

                        sText += sInitText + "IVA %:" + sMidText + result.rows.item(0)['IVA'] + sEndText;
                        sText += sInitText + "Recargo Equivalencia %:" + sMidText + result.rows.item(0)['RecEquivalencia'] + sEndText;

                        $("#lvDatosArticulo").append(sText);
                        $("#lvDatosArticulo").listview("refresh");

                    });
                });
            }
            else {
                var sText = "";
                sText += "<li data-role='list-divider'>General</li>";
                sText += "<li>Codigo:</li>";
                sText += "<li>Descripcion:</li>";
                sText += "<li>Código EAN:</li>";
                sText += "<li>Articulos Unidad:</li>";
                sText += "<li>Peso Bruto:</li>";
                sText += "<li>Peso Neto:</li>";
                sText += "<li>Peso Escurrido:</li>";
                sText += "<li>IVA %:</li>";
                sText += "<li>Recargo Equivalencia %:</li>";

                $("#lvDatosArticulo").append(sText);
                $("#lvDatosArticulo").listview("refresh");
            }

        });

        function queryString(parameter) {
            var loc = location.search.substring(1, location.search.length);
            var param_value = false;
            var params = loc.split("&");
            for (i = 0; i < params.length; i++) {
                param_name = params[i].substring(0, params[i].indexOf('='));
                if (param_name == parameter) {
                    param_value = params[i].substring(params[i].indexOf('=') + 1)
                }
            }
            if (param_value) {
                return param_value;
            }
            else {
                return null; 
            }
        }

        function successfunction() {
            $.mobile.hidePageLoadingMsg();
        }

        function errorHandler(transaction, error) {
            Alert(error.message + ' (Code ' + error.code + ')');
            return true;
        }

        function nullDataHandler(transaction, results) {
        }

        function errorfunction(e) {
            if (e == DOMException.INVALID_STATE_ERR) {

                Alert("Invalid database version.");
            } else {
                Alert("Unknown error " + e + ".");
            }
            $.mobile.hidePageLoadingMsg();
        }

        function GetStorageValue(sKey) {
            var value;
            value = localStorage[sKey];
            //localStorage[sKey] = null; 
            localStorage.removeItem(sKey);

            if (value == "null")
                value = null;

            return value;
        }
 
</script>
</head> 

<body>

        <!-- Pàgina principal ---------------------------------------------------->

         <div data-role="page" id="pagecli1" data-theme="c" data-title="Articulos">

	        <div data-role="header">
	            <a href="index.html" data-icon="home">Inicio</a>
	            <h1>Articulos</h1>
	            <a href="javascript:localStorage['From']='Articulos';window.location.assign('ArticulosSeleccion.html');" data-role="button" data-transition="pop"   data-icon="check" data-theme="b" data-ajax="false">Selección Articulo</a>
            </div>

            <div data-role="navbar" data-iconpos="left">
	            <ul>
                	<li><a href="javascript:NextItem()" data-ajax="false"  data-iconpos="left" data-icon="arrow-r" class="ui-btn-active ui-state-persist">Siguiente</a> </li>
                    <li><a href="javascript:PrevItem()" data-ajax="false" data-iconpos="left" data-icon="arrow-l" >Anterior</a> </li>
 		            <li><a href="javascript:FirstItem()" data-ajax="false" data-iconpos="left" data-icon="arrow-u" >Primero</a> </li>
                    <li><a href="javascript:LastItem()" data-ajax="false" data-iconpos="left" data-icon="arrow-d" >Ultimo</a> </li>
	            </ul>
            </div>

  
            <div data-role="content"  >	

		        <ul data-role="listview" data-inset="true" id= "lvDatosArticulo">
                    
			    </ul>

              </div>

               <div data-role="footer"  data-position="fixed" >
                     <div data-role="navbar" data-iconpos="top">
                          <ul>
                             <li><a href="javascript:window.location.assign('RuteroMenu.html');"  data-icon="plus" data-prefetch="true"  >Rutero</a></li>
                             <li><a href="javascript:window.location.assign('ClientesMenu.html');"  data-icon="back" >Interlocutores</a></li>
                             <li><a href="javascript:window.location.assign('VentasInicio.html');"  data-icon="back" >Ventas/Visitas</a></li>
                             <li><a href="javascript:window.location.assign('HerramientasMenu.html');"  data-icon="gear" >Herramientas</a></li>
                            </ul>                
                    </div>
                </div>

         </div>

    


</body>
</html>

 