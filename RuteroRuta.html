
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1">

   <meta name="apple-mobile-web-app-capable" content="yes" />
   <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
    <link rel="stylesheet" href="jquery.mobile-1.1.0/jquery-mobile-960.min.css" />
    <link rel="stylesheet" href="jquery.mobile-1.1.0/jquery.mobile-1.1.0.min.css" />

    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="jquery.mobile-1.1.0/modernizr.min.js"></script>

    <script src="jquery.mobile-1.1.0/jquery-1.7.1.min.js"></script>
    <script src="jquery.mobile-1.1.0/jquery.mobile-1.1.0.min.js"></script>

    <script type="text/javascript" src="jquery.mobile-1.1.0/jquery.ui.map.js"></script>
	<script type="text/javascript" src="jquery.mobile-1.1.0/jquery.ui.map.services.js"></script>
	<script type="text/javascript" src="jquery.mobile-1.1.0/jquery.ui.map.extensions.js"></script>


        <script type="text/javascript" src="demo.js"></script>


    <script type="text/javascript">


        //var mobileDemo = { 'lat': '41.401944', 'long': '2.171389' };
        var mobileDemo = { 'center': '41.401944,2.171389', 'zoom': 10 };

        $('#directions_map').live('pageinit', function () {
            demo.add('directions_map', function () {
                $('#map_canvas_1').gmap({ 'center': mobileDemo.center, 'zoom': mobileDemo.zoom, 'disableDefaultUI': true, 'callback': function () {
                    var self = this;
                    self.set('getCurrentPosition', function () {
                        self.refresh();
                        if (navigator.geolocation) {
                            self.getCurrentPosition(function (position, status) {
                                if (status === 'OK') {
                                    var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude)
                                    self.get('map').panTo(latlng);
                                    self.search({ 'location': latlng }, function (results, status) {
                                        if (status === 'OK') {
                                            $('#from').val(results[0].formatted_address);
                                        }
                                    });
                                } else {
                                    alert('Unable to get current position');
                                }
                            });
                        }
                    });
                    $('#submit').click(function () {
                        self.displayDirections({ 'origin': $('#from').val(), 'destination': $('#to').val(), 'travelMode': google.maps.DirectionsTravelMode.DRIVING }, { 'panel': document.getElementById('directions') }, function (response, status) {
                            (status === 'OK') ? $('#results').show() : $('#results').hide();
                        });
                        return false;
                    });
                }
                });
            }).load('directions_map');
        });

        $('#directions_map').live('pageshow', function () {
            demo.add('directions_map', $('#map_canvas_1').gmap('get', 'getCurrentPosition')).load('directions_map');
        });
			

 
</script>
</head> 

<body>

        <!-- Pàgina principal ---------------------------------------------------->

         <div id="directions_map" data-role="page">

           <div data-role="header">
                <a data-rel="back" data-icon ="back">Anterior</a>
	            <h1>Rutero</h1>
                <a href="javascript:window.location.assign('index.html');" data-icon="home">Inicio</a>
            </div>

             <div data-role="navbar">
	            <ul>
		            <li><a href="javascript:window.location.assign('RuteroLocalizacion.html');" data-ajax="false" >Localización</a> </li>
		            <li><a href="javascript:window.location.assign('RuteroRuta.html');" data-ajax="false" class="ui-btn-active ui-state-persist">Ruta</a> </li>
                    <li><a href="javascript:window.location.assign('RuteroMapa.html');" data-ajax="false" >Mapa</a> </li>
	            </ul>
            </div> 
 
			<div data-role="content">	

				<div class="ui-bar-c ui-corner-all ui-shadow" style="padding:1em;">
					<div id="map_canvas_1" style="height:550px;"></div>
					<p>
						<label for="from">Desde</label>
						<input id="from" class="ui-bar-c" type="text" value="" />
					</p>
					<p>
						<label for="to">Hasta</label>
						<input id="to" class="ui-bar-c" type="text" value="" />
					</p>
					<a id="submit" href="#" data-role="button" data-icon="search">Obtener Ruta</a>
				</div>

				<div id="results" class="ui-listview ui-listview-inset ui-corner-all ui-shadow" style="display:none;">
					<div class="ui-li ui-li-divider ui-btn ui-bar-b ui-corner-top ui-btn-up-undefined">Resultados</div>
					<div id="directions"></div>
					<div class="ui-li ui-li-divider ui-btn ui-bar-b ui-corner-bottom ui-btn-up-undefined"></div>
				</div>
			</div>


            <div data-role="footer"  data-position="fixed" >
                    <div data-role="navbar" data-iconpos="top">
                        <ul>
                            <li><a href="javascript:window.location.assign('VentasInicio.html');"  data-icon="plus" data-prefetch="true"  >Ventas/Visitas</a></li>
                            <li><a href="javascript:window.location.assign('ClientesGeneral.html');"  data-icon="back" >Interlocutores</a></li>
                            <li><a href="javascript:window.location.assign('Articulos.html');"  data-icon="back" >Articulos</a></li>
                            <li><a href="javascript:window.location.assign('HerramientasMenu.html');"  data-icon="back" >Herramientas</a></li>
                        </ul>                
                </div>
            </div>
		</div>

</body>
</html>

 